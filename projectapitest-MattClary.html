<!--THE MAIN THING THAT IS NECESSARY FOR FRONT END IS REMOVING THE BLUE 
    LINK FORMAT OF THE TITLE ON CSS FOR GENERAL AESTHETIC PURPOSES.
    EVERYTHING ELSE IS GOOD TO GO.
-->
<!DOCTYPE html>

<html lang="en-us">

<head>

    <meta charset="UTF-8">
    <title>DIVELOP</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">


</head>

<body>

    <!-- bootstrap layout for responsive API-->
    <div class="container">
        <div class="row">
            <div class="col-4">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                            </h2>
                            <div id="collapse1" class="collapse" aria-labelledby="headingOne"
                                data-parent="#accordionExample">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
        // provided specific database info pulls for coding-centered articles
        var key = '54832f693a9d4141bb9b0f6d483fde23';
        var search = 'programming OR javascript OR coding OR jquery OR html OR css OR python OR database NOT police NOT trump NOT murder NOT sneaker NOT unity NOT slides NOT ebay NOT offer';
        var sort = 'popularity';
        // ADDED MOMENT.JS FOR TODAYS NEWS
        var date = moment().format('YYYY MM DD');
        console.log(date);

        $.ajax({
            url: 'https://newsapi.org/v2/everything?q=' + search + '&from=' + date + '&language=en' + '&sortBy=' + sort + '&apikey=' + key,
            method: 'GET'
        }).done(function (response) {
            console.log(response);
            var results = response.articles;
            console.log(results.length);
            //IF WE NEED LESS ARTICLES PLACE "-X" BEHIND RESULTS.LENGTH EX. "i < results.length -16"
            for (var i = 0; i < results.length; i++) {
                console.log("article " + i + " - " + results[i].description);
                console.log("article " + i + " - " + results[i].title);
                console.log("article " + i + " - " + results[i].url);
                console.log("article " + i + " - " + results[i].content);
                //CREATED VARIABLES THAT RESPOND TO BOOTSTRAP HTML
                var contentHolderHTML = $("#headingOne");
                var div = $("<div class='accordion card card-header mb-0' id='accordionExample'>");
                var resultsTitle = $("<button class='btn btn-link' type='button' data-toggle='collapse' data-target='#collapse" + i + "'' aria-expanded='false' aria-controls='collapseOne'></button>");
                var resultsDescription = $(" <div id='collapse" + i + "' class='collapse' aria-labelledby='headingOne' data-parent='#accordionExample'><div class='card-body'>");
                var resultsUrl = $(" <div id='collapse" + i + "' class='collapse' aria-labelledby='headingOne' data-parent='#accordionExample'><div class='card-body'> <a href='" + results[i].url + "'> Read More...</a> </div>");

                /*
                    Can bootstrap classes maintain format after being placed in jquery function? YES
                     `->How should I change href for bootstrap layout to maintain? URL FORMAT SHOULD WORK
                    What can I use with variables I have already defined to make it work within what I already have? UPS
                */

                resultsDescription.text(results[i].description);
                //resultsContent.text(results[i].content);
                resultsTitle.text(results[i].title);
                div.append(resultsTitle, resultsDescription, resultsUrl);//resultsContent
                div.appendTo(contentHolderHTML);
            }
        });
    </script>

</body>

</html>